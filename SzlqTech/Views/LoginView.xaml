<Window
    x:Class="SzlqTech.Views.LoginView"
    xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
    xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
    xmlns:const="clr-namespace:SzlqTech.Core.Consts;assembly=SzlqTech.Core"
    xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
    xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
    xmlns:local="clr-namespace:SzlqTech.Views"
    xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
    xmlns:md="http://materialdesigninxaml.net/winfx/xaml/themes"
    xmlns:prism="http://prismlibrary.com/"
    Title="LoginView"
    Width="940"
    Height="550"
    AllowsTransparency="False"
    Background="{DynamicResource MaterialDesignCardBackground}"
    Icon="/Assets/Images/logo.ico"
    ResizeMode="NoResize"
    WindowStartupLocation="CenterScreen"
    WindowStyle="None"
    mc:Ignorable="d">
    <prism:Dialog.WindowStyle>
        <Style TargetType="Window">
            <Setter Property="Width" Value="780" />
            <Setter Property="Height" Value="450" />
            <Setter Property="SizeToContent" Value="WidthAndHeight" />
        </Style>
    </prism:Dialog.WindowStyle>
    <md:DialogHost
        FocusVisualStyle="{x:Null}"
        Identifier="{x:Static const:AppSharedConsts.DialogIdentifier}"
        IsOpen="{Binding IsBusy}">
        <md:DialogHost.DialogContent>
            <StackPanel>
                <ProgressBar
                    Width="40"
                    Height="40"
                    Margin="10"
                    IsIndeterminate="True"
                    Style="{StaticResource MaterialDesignCircularProgressBar}" />
            </StackPanel>
        </md:DialogHost.DialogContent>
        <Grid>
            <Grid.RowDefinitions>
                <RowDefinition Height="auto" />
                <RowDefinition />
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="1*" />
                <ColumnDefinition />
            </Grid.ColumnDefinitions>

            <Border
                x:Name="HeaderBorder"
                Grid.ColumnSpan="2"
                Background="Transparent" />

            <Button
                x:Name="btnClose"
                Grid.Column="1"
                Grid.ColumnSpan="2"
                Margin="5"
                HorizontalAlignment="Right"
                VerticalAlignment="Top"
                Background="Transparent"
                BorderThickness="0"
                Content="{md:PackIcon Kind=Close}"
                FontSize="24"
                Foreground="Black" />

            <Image
                Grid.Row="1"
                Margin="50"
                Source="/Assets/Images/back.png" />
            <DockPanel
                Grid.Row="1"
                Grid.Column="1"
                Margin="15"
                HorizontalAlignment="Stretch"
                VerticalAlignment="Center"
                LastChildFill="False">


                <TextBlock
                    Margin="0,10,0,5"
                    DockPanel.Dock="Top"
                    FontSize="26"
                    FontWeight="Bold"
                    Text="登录" />
                <TextBox
                    Margin="0,12"
                    Padding="3"
                    md:HintAssist.Hint="用户名"
                    DockPanel.Dock="Top"
                    FontSize="14"
                    Text="{Binding UserName}" />

                <PasswordBox
                    Margin="0,12"
                    md:HintAssist.Hint="密码"
                    md:PasswordBoxAssist.Password="{Binding Password, Mode=TwoWay, UpdateSourceTrigger=PropertyChanged}"
                    md:TextFieldAssist.HasClearButton="True"
                    DockPanel.Dock="Top"
                    FontSize="14"
                    Style="{StaticResource MaterialDesignRevealPasswordBox}" />

                <CheckBox
                    Content="记住密码"
                    DockPanel.Dock="Top"
                    IsChecked="{Binding IsRememberMe}" />

                <Button
                    Margin="0,10"
                    Padding="5"
                    Command="{Binding ExecuteCommand}"
                    CommandParameter="LoginUser"
                    Content="登录"
                    DockPanel.Dock="Top"
                    FontSize="14"
                    IsEnabled="{Binding IsLoginEnabled}" />

                <DockPanel DockPanel.Dock="Top">
                    <TextBlock
                        DockPanel.Dock="Right"
                        FontWeight="Bold"
                        Text="忘记密码">
                        <i:Interaction.Triggers>
                            <i:EventTrigger EventName="MouseLeftButtonDown">
                                <i:InvokeCommandAction Command="{Binding ExecuteCommand}" CommandParameter="ForgotPassword" />
                            </i:EventTrigger>
                        </i:Interaction.Triggers>
                    </TextBlock>


                </DockPanel>
            </DockPanel>


        </Grid>
    </md:DialogHost>
</Window>
